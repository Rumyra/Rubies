<!DOCTYPE html>
<html lang="en">
<head>
  <!--char set (lang above)-->
  <meta charset="utf-8">

  <!--device/browser shizzle-->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--meta content-->
  <link rel="shortcut icon" href="favicon.ico" />
  
  <meta name="author" content="Ruth John (@rumyra)">
  <meta name="dcterms.rightsHolder" content="Ruth John for Rumyra Ltd, United Kingdom, 2015">
  <title>Rumyra's Interactive VJing</title>

  <link href="css/projection.css" rel="stylesheet" type="text/css">
  <script src="https://js.pusher.com/3.0/pusher.min.js"></script>
  
</head>
<body class="projection">

<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   width="88px" height="100px" viewBox="0 0 88 100" enable-background="new 0 0 88 100" xml:space="preserve">
<g>
  <polygon fill="none" stroke="#000000" stroke-miterlimit="10" points="44.001,100 0.698,75 0.698,25.003 44.001,0.003 
    87.303,25.003 87.303,75   "/>
  <polygon fill="none" stroke="#000000" stroke-miterlimit="10" points="44,74.828 22.499,62.417 22.499,37.589 44,25.175 
    65.5,37.589 65.5,62.417   "/>
  <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="65.5" y1="37.589" x2="87.303" y2="25.003"/>
  <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="65.5" y1="62.417" x2="87.303" y2="75"/>
  <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="44" y1="74.828" x2="44.001" y2="100"/>
  <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="22.499" y1="62.417" x2="0.698" y2="75"/>
  <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="22.499" y1="37.589" x2="0.698" y2="25.003"/>
  <line fill="none" stroke="#000000" stroke-miterlimit="10" x1="44" y1="25.175" x2="44.001" y2="0.003"/>
</g>
</svg>



<div id="pusher" data-key="{{PUSH_KEY}}"></div>
<script type="text/javascript">
var config = document.getElementById('pusher').dataset;
var pusher = new Pusher(config.key, {encrypted:true});

Pusher.channel_auth_endpoint = 'http://localhost:3000/pusher/auth';
pusher.connection.bind('state_change', function(states) {
    console.log("Pusher's current state is " + states.current);
});

// subscribe to channel
var channel = pusher.subscribe('private-rubies');

channel.bind('pusher:subscription_succeeded', function() {
  console.log('subscription succeeded');
});

// callback on event
channel.bind('client-audience_member', function(data) {
  console.log(data.person);
});


</script>
</body>
</html>